<ion-view view-title="Dashboard">
    <ion-content on-scroll="resetHold()">
        <ion-list>
            <ion-item class="item dash-item" ng-repeat="question in questions | orderBy:'timestamp':true" on-tap="tap(question)" on-double-tap="doubleTap(question)">
                <div>
                    <div class="time">
                        <span>{{question.timestamp | amCalendar}}</span>
                        <br/>
                        <span class="status">
                            <i ng-if="question.status == 'unread'" class="icon ion-eye-disabled placeholder-icon unread"></i>
                            <i ng-if="question.status == 'read'" class="icon ion-eye placeholder-icon read"></i>
                            <i ng-if="question.status == 'replied'" class="icon ion-android-checkmark-circle placeholder-icon replied"></i>
                        </span>
                    </div>
                    <img class="dash-avatar" ng-src="{{question.fromId == authData.facebook.id ? question.friend.picture.data.url : 'img/anon.png'}}">
                    <h2>{{question.fromId == authData.facebook.id ? question.friend.name : 'Anonymous'}}</h2>
                    <div ng-switch="question.fromId != authData.facebook.id && question.status == 'unread'">
                        <p ng-switch-when="true">{{question.question | limitTo : 5 : 0}}...<span class="press-to-view"> (Double tap to view)</span></p>
                        <p ng-switch-default>{{question.question}}</p>
                    </div>
                </div>
            </ion-item>
        </ion-list>
    </ion-content>
</ion-view>
